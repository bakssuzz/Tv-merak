<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<title>TV Merak - Narodna Muzika</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: black;
  overflow: hidden;
  font-family: Arial, sans-serif;
}
#player {
  width: 100%;
  height: 100%;
}
.header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: rgba(0,0,0,0.85);
  color: #FFD700;
  padding: 12px;
  font-size: 28px;
  z-index: 10;
  text-align: center;
  text-shadow: 2px 2px 4px black;
}
.ticker {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 50px;
  background: rgba(0,0,0,0.85);
  overflow: hidden;
  z-index: 10;
  display: flex;
  align-items: center;
  font-size: 20px;
}
.ticker span {
  white-space: nowrap;
  display: inline-block;
  padding-left:100%;
  font-size: 20px;
  color: #00FF00;
  font-weight: bold;
  text-shadow: 1px 1px 2px black;
  animation: scroll 40s linear infinite;
}
@keyframes scroll {
  0% { transform: translateX(0%); opacity: 0; }
  5% { opacity: 1; }
  95% { opacity: 1; }
  100% { transform: translateX(-100%); opacity: 0; }
}
</style>
</head>
<body>

<div class="header">ğŸ“º TV Merak - Narodna Muzika</div>
<div class="ticker"><span id="ticker-text">ğŸµ UÄitavanje pjesme... ğŸµ</span></div>
<div id="player"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;

// Playlist-e: tvoja + 3 velike narodna/folk playlist-e
const playlists = [
  {id: "PLbwaCl4sNd2re8JNfPNxasnVXQzb-3krn", name: "Tvoja Playlist"}, 
  {id: "PL9ypKbggGDkyU8SDp4LrJn4VfSP97iYH8", name: "Narodna 1"},
  {id: "PLRvrUfjb2o180MmLLf5GGziPLLsDUd0zE", name: "Narodna 2"},
  {id: "PLfKy5D01RR_LKJyEv8CZfDpJKnD8efV24", name: "Narodna 3"}
];

let currentPlaylist = 0;
const playlistDuration = 30 * 60 * 1000; // 30 minuta

const ticker = document.getElementById("ticker-text");

function onYouTubeIframeAPIReady() {
  loadPlaylist(currentPlaylist);

  setInterval(() => {
    currentPlaylist = (currentPlaylist + 1) % playlists.length;
    loadPlaylist(currentPlaylist);
  }, playlistDuration);
}

function loadPlaylist(index){
  const playlist = playlists[index];
  if(player){
    player.loadPlaylist({listType:'playlist', list: playlist.id, index:0});
  } else {
    player = new YT.Player('player', {
      height: '100%',
      width: '100%',
      playerVars: {autoplay:1, controls:0, rel:0, modestbranding:1},
      events: {
        'onReady': () => {player.loadPlaylist({listType:'playlist', list: playlist.id, index:0});},
        'onStateChange': onPlayerStateChange
      }
    });
  }
}

// Kada poÄne video, update ticker
function onPlayerStateChange(event){
  if(event.data == YT.PlayerState.PLAYING){
    updateTicker();
  }
}

// Update ticker sa nazivom playlist-e i pjesme
function updateTicker(){
  if(player && player.getVideoData){
    const videoData = player.getVideoData();
    const title = videoData.title || "ğŸµ TV Merak ğŸµ";
    const playlistName = playlists[currentPlaylist].name;
    ticker.textContent = "ğŸ“º " + playlistName + " | ğŸµ " + title;
  }
  setTimeout(updateTicker, 3000);
}
</script>

</body>
</html>
